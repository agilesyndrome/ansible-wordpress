# This file is auto generated by conf-update! Do not modify

# If wp-config does not exist
if [ ! -f {{getv "/root"}}/wp-config.php ]; then
    wp-cli config create \
        --path={{getv "/root"}} \
        --dbname={{getv "/db/name" "wordpress"}} \
        --dbuser={{getv "/db/user" "wp"}} \
        --dbpass={{getv "/db/pass" "wp"}} \
        --dbhost={{getv "/db/host" "localhost"}} \
        --dbprefix={{getv "/db/prefix" "wp_"}}
else
    echo "Success: wp-config.php already exists!"
fi

{{range gets "/config_raw/*"}}
wp-cli config set --path={{getv "/root"}} {{base .Key}} {{.Value}} --raw
{{end}}

{{range gets "/config/*"}}
wp-cli config set --path=/workspace/wp{{getv "/root"}} {{base .Key}} {{.Value}}
{{end}}
